<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<script>

</script>
</head>

<body>

<ul id="list">
	<li>
	  	<input type="button" value="-" />
	    <strong>0</strong>
	  	<input type="button" value="+" />
	    单价：<em>12.5元</em>
	    小计：<span>0元</span>
    </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>10.5元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>8.5元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>8元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>14.5元</em>
    小计：<span>0元</span>
  </li>
</ul>

<p>
商品合计共：0件，共花费了：0元<br />
其中最贵的商品单价是：0元
</p>

</body>
<script>
	var list = document.getElementById('list');
	var aLi = list.getElementsByTagName('li');
	var op = document.getElementsByTagName('p')[0];
	
	var totalNum = 0;
	var sum = 0;
	var arr = [];

	for(var i=0; i<aLi.length; i++){
		fn(i);
	}
	
	function fn(n){
		var aBtn = aLi[n].getElementsByTagName('input');
		var oStrong = aLi[n].getElementsByTagName('strong')[0];
		var oEm = aLi[n].getElementsByTagName('em')[0];
		var oSpan = aLi[n].getElementsByTagName('span')[0];
		
		var price = parseFloat(oEm.innerHTML);
		var num = oStrong.innerHTML;
		
		aBtn[0].onclick = function(){
			var max = 0;
			
			if(num==0){
				num = 1;
				
			}else{
				totalNum--;
				sum -= price;
			}
			if(num ==1){
				arr[n] = 0;
			}
			num--;	
			fn1(max);
		}
		aBtn[1].onclick = function(){
		var max = 0;
			num++;
			totalNum++;
			arr[n] = price;
			sum += price;
		  	fn1(max);
		}
		
		
		function fn1(max){
			for(var i=0; i<aLi.length; i++){
				if(max<arr[i]){
					max = arr[i];
				}
			}
			oStrong.innerHTML = num;
			oSpan.innerHTML = num*price+'元';
			op.innerHTML = '商品合计共：'+totalNum+'件，共花费了：'+sum+'元<br />其中最贵的商品单价是：'+max+'元';
		}
	}
	
	
</script>
</html>
